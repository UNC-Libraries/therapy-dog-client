{
  "destination": "uuid:7cd4bca5-0de4-4dda-93ac-f6d328506760",
  
  "title": "Test Form",
  
  "children": [
    {
      "key": "info",
      "type": "section",
      "label": "Article Information",
      "children": [
        {
          "key": "title",
          "type": "text",
          "label": "Title",
          "required": true
        },
        {
          "key": "keywords",
          "type": "text",
          "label": "Keywords"
        },
        {
          "key": "pubdate",
          "type": "date",
          "label": "Publication Date"
        },
        {
          "key": "version",
          "type": "select",
          "label": "Version",
          "options": [
            "Preprint",
            "Postprint",
            "Publisher"
          ]
        }
      ]
    },
    {
      "key": "authors",
      "type": "section",
      "label": "Authors",
      "repeat": true,
      "children": [
        {
          "key": "first",
          "type": "text",
          "label": "First Name",
          "required": true
        },
        {
          "key": "last",
          "type": "text",
          "label": "Last Name",
          "required": true
        }
      ]
    },
    {
      "key": "article",
      "type": "file",
      "label": "Article",
      "required": true
    },
    {
      "key": "supplemental",
      "label": "Supplemental Files",
      "type": "section",
      "repeat": true,
      "children": [
        {
          "key": "file",
          "type": "file",
          "label": "File"
        },
        {
          "key": "description",
          "type": "text",
          "label": "Description"
        }
      ]
    }
  ],
  
  "templates": [
    {
      "id": "article",
      "type": "xml",
      "template": "element 'mods' xmlns='http://www.loc.gov/mods/v3' @compact=true { info.title -> (element 'titleInfo') (element 'title') ; info.pubdate -> (element 'originInfo') (element 'dateIssued'); info.keywords -> (element 'subject'); each authors as |author| { element 'name' { author.first -> element 'namePart' type='given'; author.last -> element 'namePart' type='family' } } }"
    },
    
    {
      "id": "supplemental",
      "type": "xml",
      "template": "element 'mods' xmlns='http://www.loc.gov/mods/v3' @compact=true { s.description -> element 'abstract' }"
    }
  ],
  
  "bundle": "item kind='Aggregate Work' label=title { link rel='http://cdr.unc.edu/definitions/1.0/base-model.xml#defaultWebObject' href='#article'; metadata { partial 'article' }; item type='File' fragment='article' label=article.name { file { article } }; each supplemental as |s| { if s.file { item type='File' label=s.file.name { metadata { partial 'supplemental' }; file { s.file } } } } }"
}
